<!-- PlannerController as pc -->
<nav ng-include="'/views/templates/navbar.html'"></nav>
<!-- Inventory Table  -->
<div class="col-xs-12">
  <button type="button" class="btn-inventory-toggle btn-default btn-primary" ng-click="pc.showHide()" ng-if="pc.isVisible == false">Show Inventory</button>
  <button type="button" class="btn-inventory-toggle btn-default btn-primary" ng-click="pc.showHide()" ng-if="pc.isVisible">Hide Inventory</button>
</div>

<div ng-show="pc.isVisible">
  <div class="container planner-tables planner-inventory">

    <form>
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-search"></i></div>
            <input type="text" class="form-control" placeholder="Search" ng-model="searchSeeds">
          </div>
        </div>
      </form>

  <table class="table table-bordered table-striped">
  <thead>
    <tr>
      <td>
          <a  ng-click="sortType = 'crop'; sortReverse = !sortReverse">
            Crop
            <span ng-show="sortType == 'crop' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'crop' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'variety'; sortReverse = !sortReverse">
            Variety
            <span ng-show="sortType == 'variety' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'variety' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'purchasedate'; sortReverse = !sortReverse">
            Date
            <span ng-show="sortType == 'purchasedate' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'purchasedate' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'lotnum'; sortReverse = !sortReverse">
            Lot Number
            <span ng-show="sortType == 'lotnum' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'lotnum' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'quanity'; sortReverse = !sortReverse">
            Quanity
            <span ng-show="sortType == 'quantity' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'quantity' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'itemcode'; sortReverse = !sortReverse">
            Item Code
            <span ng-show="sortType == 'itemcode' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'itemcode' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'organic'; sortReverse = !sortReverse">
            Organic
            <span ng-show="sortType == 'organic' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'organic' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'untreated'; sortReverse = !sortReverse">
            Untreated
            <span ng-show="sortType == 'untreated' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'untreated' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'nongmo'; sortReverse = !sortReverse">
            NonGMO
            <span ng-show="sortType == 'nongmo' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'nongmo' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'name'; sortReverse = !sortReverse">
            Supplier
            <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td>
          <a  ng-click="sortType = 'seedcheck'; sortReverse = !sortReverse">
            Seed Check
            <span ng-show="sortType == 'seedcheck' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'seedcheck' && sortReverse" class="fa fa-caret-up"></span>
          </a>
      </td>
      <td></td>
    </tr>
  </thead>
    <tbody>
      <tr ng-repeat="seed in pc.inventory.list | orderBy:sortType:sortReverse | filter:searchSeeds">
        <td>{{ seed.crop }}</td>
        <td>{{ seed.variety }}</td>
        <td>{{ seed.purchase_date | date:'MM-dd-yyyy' }}</td>
        <td>{{ seed.lot_number }}</td>
        <td>{{ seed.quantity }}</td>
        <td>{{ seed.item_code }}</td>
        <td>{{ seed.organic}}</td>
        <td>{{ seed.untreated }}</td>
        <td>{{ seed.non_gmo }}</td>
        <td>{{ seed.supplier_id }}</td>
        <td>{{ seed.seed_check_sources }}</td>
        <td><button type="button" ng-click="pc.open(seed)">Plant</button></td>
      </tr>
    </tbody>
  </table>
  </div>
</div>
<!-- end of inventory table-->

<!-- add a plant modal -->
<div class="add-plant-modal container">
  <script type="text/ng-template" id="addPlantModalContent.html">
    <div class="modal-header">
      <h3>Move to Plant</h3>
    </div>
    <div class="modal-body col-xs-12">
      <div class="col-xs-12">
        <label class="col-xs-4">Crop: </label>
        <p ng-model="apmic.crop">{{apmic.crop}}</p>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Variety: </label>
        <p ng-model="apmic.variety">{{apmic.variety}}</p>
        <br>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Quantity: </label>
        <input type="number" ng-model="apmic.quantity" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Date: </label>
        <input type="date" ng-model="apmic.date_planted" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Location: </label>
        <input type="text" ng-model="apmic.location" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Area Sqft: </label>
        <input type="text" ng-model="apmic.area_sqft" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Notes: </label>
        <input type="text" ng-model="apmic.notes" class="col-xs-8">
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default btn-success" ng-click="apmic.addPlant()" >
        Plant
      </button>
      <button type="button" class="btn btn-default btn-danger" ng-click="apmic.clearPlantInputs()">
        Cancel
      </button>
    </div>
  </script>

<!-- planner tables to display planted/harvested/sold on planner page -->
  <div class="container">
    <div class="col-xs-12">
      <div class="col-xs-4 planner-tables">
        <div class="alert alert-info">
          Sort Reverse: {{ sortReverse }}
          <br>
          Search Query: {{ searchPlanted }}
        </div>
        <form>
          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-search"></i></div>
              <input type="text" class="form-control" placeholder="Search" ng-model="searchPlanted">
            </div>
          </div>
        </form>
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <td>
                <a  ng-click="sortType = 'planted'; sortReverse = !sortReverse">
                  Planted
                  <span ng-show="sortType == 'planted' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'planted' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              <td>
                <a  ng-click="sortType = 'planted'; sortReverse = !sortReverse">
                  Variety
                  <span ng-show="sortType == 'planted' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'planted' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </td>
              <td>
                <a  ng-click="sortType = 'planted'; sortReverse = !sortReverse">
                  Location
                  <span ng-show="sortType == 'planted' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'planted' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </td>
                <td></td>
              </td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="plant in pc.planted.list | orderBy:sortType:sortReverse | filter:searchPlanted">
              <td>{{ plant.crop }}</td>
              <td>{{ plant.variety }}</td>
              <td>{{ plant.location }}</td>
              <td><button type="button" ng-click="pc.openHarvest(plant)">Harvest</button></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-xs-4 planner-tables">
        <div class="alert alert-info">
          Sort Reverse: {{ sortReverse }}
          <br>
          Search Query: {{ searchHarvested }}
        </div>
        <form>
          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-search"></i></div>
              <input type="text" class="form-control" placeholder="Search" ng-model="searchHarvested">
            </div>
          </div>
        </form>
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <td>
                <a  ng-click="sortType = 'harvested'; sortReverse = !sortReverse">
                  Harvested
                  <span ng-show="sortType == 'harvested' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'harvested' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </td>
              <td></td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="seed in pc.harvested.list | orderBy:sortType:sortReverse | filter:searchHarvested">
              <td>{{ seed.harvested }}</td>
              <td><button type="button" ng-click="pc.openSold()">Sell</button></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-xs-4 planner-tables">
        <div class="alert alert-info">
          Sort Reverse: {{ sortReverse }}
          <br>
          Search Query: {{ searchSold }}
        </div>
        <form>
          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-search"></i></div>
              <input type="text" class="form-control" placeholder="Search" ng-model="searchSold">
            </div>
          </div>
        </form>
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <td>
                <a  ng-click="sortType = 'sold'; sortReverse = !sortReverse">
                  Sold
                  <span ng-show="sortType == 'sold' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'sold' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="seed in pc.sold_id.list | orderBy:sortType:sortReverse | filter:searchSold">
              <td>{{ seed.sold }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- add a harvest modal -->
  <div class="add-harvest-modal container">
    <script type="text/ng-template" id="addHarvestModalContent.html">
      <div class="modal-header">
        <h3>Move Plant to Harvest</h3>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Crop: </label>
        <p ng-model="ahmic.crop">{{ahmic.crop}}</p>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Variety: </label>
        <p ng-model="ahmic.variety">{{ahmic.variety}}</p>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Location: </label>
        <p ng-model="ahmic.location">{{ahmic.location}}</p>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Yield in lbs: </label>
        <input type="number" ng-model="ahmic.yield" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Area sqft: </label>
        <input type="number" ng-model="ahmic.area_sqft" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Date: </label>
        <input type="date" ng-model="ahmic.date_harvested" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Notes: </label>
        <textarea rows="4" ng-model="ahmic.notes" class="col-xs-8"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-success" ng-click="ahmic.addHarvest()" >
          Harvest
        </button>
        <button type="button" class="btn btn-default btn-danger" ng-click="ahmic.clearHarvestInputs()">
          Cancel
        </button>
      </div>
    </script>
  </div>

  <!-- add a sell modal -->
  <div class="add-sold-modal container">
    <script type="text/ng-template" id="addSoldModalContent.html">
      <div class="modal-header">
        <h3>Sell Harvest</h3>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Weight Sold: </label>
        <input type="number" ng-model="asmic.weight_sold" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Date: </label>
        <input type="date" ng-model="asmic.date_sold" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Sold to: </label>
        <input type="text" ng-model="asmic.sold_to" class="col-xs-8">
      </div>
      <div class="col-xs-12">
        <label class="col-xs-4">Notes: </label>
        <textarea rows="4" ng-model="asmic.notes" class="col-xs-8"></textarea>
      </div>
      <div class="col-xs-12">
        <label class="col-xs-3">Sold Out: </label>
        <input type="checkbox" ng-model="asmic.sold_out" class="checkbox-sold col-xs-3">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-success" ng-click="asmic.addSold()" >
          Sell
        </button>
        <button type="button" class="btn btn-default btn-danger" ng-click="asmic.clearSoldInputs()">
          Cancel
        </button>
      </div>
    </script>
  </div>
